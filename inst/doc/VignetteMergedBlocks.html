<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Introduction to the mergedblocks package</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to the mergedblocks package</h1>



<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(mergedblocks)</a></code></pre></div>
<p>Merged block randomization is a restricted randomization method designed for small clinical trials (at most 100 subjects) or trials with small strata, for example in multicentre trials. It can be used for more than two groups (treatment arms) or unequal randomization ratios.</p>
<p>There are two functions in the mergedblocks package:</p>
<ul>
<li><code>mergedblocks()</code>, to create randomization lists for a single stratum.</li>
<li><code>mergedblocksmulti()</code>, to create randomization lists for multiple strata.</li>
</ul>
<p>The package can be installed by typing <code>install.packages(&quot;mergedblocks&quot;)</code> in the R terminal. In addition to the package, a Shiny app is available from <a href="https://svdpas.shinyapps.io/mergedblocks/" class="uri">https://svdpas.shinyapps.io/mergedblocks/</a>, which can be used to create randomization lists for two groups (treatment arms).</p>
<p>A detailed description of the method is available in Van der Pas (2019). Merged block randomisation: A novel randomisation procedure for small clinical trials. Clinical Trials 16(3):246-252.</p>
<p>In this vignette, we provide a guided tour of the two functions in the package, illustrating the options within each function. The sections are:</p>
<ol style="list-style-type: decimal">
<li>Merged block randomization for a single stratum: <code>mergedblocks()</code></li>
</ol>
<ul>
<li>1.1 Two treatment arms, 1:1 allocation</li>
<li>1.2 Two treatment arms, unequal allocation</li>
<li>1.3 More than two treatment arms</li>
<li>1.4 Saving the randomization lists</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Merged block randomization for multiple strata: <code>mergedblocksmulti()</code></li>
</ol>
<ul>
<li>2.1 Multiple strata, same sample size per stratum</li>
<li>2.2 Multiple strata, sample sizes vary per stratum</li>
<li>2.3 Saving the randomization lists</li>
</ul>
<div id="merged-block-randomization-for-a-single-stratum-mergedblocks" class="section level2">
<h2>1. Merged block randomization for a single stratum: <code>mergedblocks()</code></h2>
<div id="two-treatment-arms-11-allocation" class="section level3">
<h3>1.1 Two treatment arms, 1:1 allocation</h3>
<p>For two treatment arms with 1:1 allocation, <code>mergedblocks()</code> only requires the number of individuals to be randomized as input, via the argument <code>n</code>. For example, we obtain a randomization list for 50 individuals via:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;1&quot; &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;2&quot; &quot;2&quot; &quot;2&quot; &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;1&quot; &quot;1&quot; &quot;2&quot; &quot;2&quot; &quot;2&quot; &quot;1&quot; &quot;2&quot;</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; [20] &quot;1&quot; &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;1&quot; &quot;2&quot; &quot;2&quot; &quot;1&quot; &quot;1&quot; &quot;2&quot; &quot;2&quot; &quot;2&quot; &quot;1&quot; &quot;1&quot; &quot;2&quot; &quot;2&quot; &quot;2&quot; &quot;1&quot; &quot;2&quot;</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; [39] &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;1&quot; &quot;2&quot;</span></a></code></pre></div>
<p>By default, the two groups will get numeric labels, in this case “1” and “2”. You can select custom labels with the <code>labels</code> argument. For example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;treatment&quot;</span>, <span class="st">&quot;placebo&quot;</span>))</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;placebo&quot;   &quot;treatment&quot; &quot;treatment&quot; &quot;placebo&quot;   &quot;placebo&quot;   &quot;treatment&quot;</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;  [7] &quot;treatment&quot; &quot;treatment&quot; &quot;placebo&quot;   &quot;placebo&quot;   &quot;placebo&quot;   &quot;treatment&quot;</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; [13] &quot;placebo&quot;   &quot;treatment&quot; &quot;treatment&quot; &quot;placebo&quot;   &quot;treatment&quot; &quot;treatment&quot;</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; [19] &quot;placebo&quot;   &quot;treatment&quot; &quot;placebo&quot;   &quot;placebo&quot;   &quot;placebo&quot;   &quot;placebo&quot;  </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; [25] &quot;treatment&quot; &quot;treatment&quot; &quot;placebo&quot;   &quot;treatment&quot; &quot;placebo&quot;   &quot;treatment&quot;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; [31] &quot;placebo&quot;   &quot;treatment&quot; &quot;treatment&quot; &quot;placebo&quot;   &quot;treatment&quot; &quot;placebo&quot;  </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; [37] &quot;treatment&quot; &quot;placebo&quot;   &quot;treatment&quot; &quot;treatment&quot; &quot;placebo&quot;   &quot;placebo&quot;  </span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; [43] &quot;placebo&quot;   &quot;treatment&quot; &quot;placebo&quot;   &quot;treatment&quot; &quot;treatment&quot; &quot;placebo&quot;  </span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; [49] &quot;placebo&quot;   &quot;placebo&quot;</span></a></code></pre></div>
</div>
<div id="two-treatment-arms-unequal-allocation" class="section level3">
<h3>1.2 Two treatment arms, unequal allocation</h3>
<p>The argument <code>ratio</code> can be used to select the desired randomization ratio. For example, if we wish to randomize 50 individuals to two groups in a 1:2 ratio, with allocations labelled as “A” and “B”, we would use:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot;</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="co">#&gt; [20] &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot;</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co">#&gt; [39] &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot;</span></a></code></pre></div>
<p>Or for a 3:2 ratio:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot;</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; [20] &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot;</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; [39] &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot;</span></a></code></pre></div>
</div>
<div id="more-than-two-treatment-arms" class="section level3">
<h3>1.3 More than two treatment arms</h3>
<p>The argument <code>ratio</code> can be used to obtain randomization lists for more than two treatment arms. Suppose the number of treatment arms is <span class="math inline">\(N\)</span>. Then the <code>ratio</code> argument is set to a vector of length <span class="math inline">\(N\)</span>, with the entries of the vector indicating the desired randomization ratio.</p>
<p>For example, to randomize 50 subjects to three treatment arms in a 1:1:1 ratio:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;1&quot; &quot;2&quot; &quot;2&quot; &quot;3&quot; &quot;3&quot; &quot;1&quot; &quot;3&quot; &quot;3&quot; &quot;2&quot; &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;1&quot; &quot;3&quot; &quot;2&quot; &quot;2&quot;</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt; [20] &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;3&quot; &quot;3&quot; &quot;1&quot; &quot;1&quot; &quot;3&quot; &quot;2&quot; &quot;2&quot; &quot;3&quot; &quot;2&quot; &quot;1&quot; &quot;3&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;1&quot;</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt; [39] &quot;3&quot; &quot;2&quot; &quot;2&quot; &quot;1&quot; &quot;3&quot; &quot;2&quot; &quot;3&quot; &quot;1&quot; &quot;3&quot; &quot;3&quot; &quot;2&quot; &quot;2&quot;</span></a></code></pre></div>
<p>If other labels than the default numeric ones are desired, the argument <code>labels</code> can be used. It requires a vector of the same length as <code>ratio</code>. For example, 1:1:1 allocation to treatments “A”, “B” and “C”:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;C&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot;</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt; [20] &quot;B&quot; &quot;C&quot; &quot;C&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;B&quot;</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; [39] &quot;A&quot; &quot;C&quot; &quot;B&quot; &quot;B&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;C&quot;</span></a></code></pre></div>
<p>For e.g. five treatment arms:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>, <span class="st">&quot;E&quot;</span>))</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;B&quot; &quot;A&quot; &quot;E&quot; &quot;C&quot; &quot;A&quot; &quot;D&quot; &quot;C&quot; &quot;C&quot; &quot;D&quot; &quot;B&quot; &quot;E&quot; &quot;B&quot; &quot;A&quot; &quot;E&quot; &quot;A&quot; &quot;D&quot; &quot;B&quot; &quot;D&quot; &quot;C&quot;</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; [20] &quot;E&quot; &quot;E&quot; &quot;D&quot; &quot;E&quot; &quot;C&quot; &quot;A&quot; &quot;B&quot; &quot;E&quot; &quot;A&quot; &quot;A&quot; &quot;C&quot; &quot;C&quot; &quot;D&quot; &quot;D&quot; &quot;B&quot; &quot;B&quot; &quot;C&quot; &quot;B&quot; &quot;E&quot;</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; [39] &quot;A&quot; &quot;D&quot; &quot;E&quot; &quot;E&quot; &quot;D&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;A&quot; &quot;E&quot; &quot;B&quot;</span></a></code></pre></div>
<p>Unequal allocation is also possible. For example, to randomize 50 individuals to three treatment arms, “A”, “B” and “C”, in a 1:1:2 ratio:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot; &quot;B&quot; &quot;C&quot; &quot;C&quot; &quot;B&quot; &quot;B&quot; &quot;C&quot; &quot;A&quot; &quot;C&quot; &quot;C&quot;</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; [20] &quot;C&quot; &quot;A&quot; &quot;A&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot; &quot;A&quot; &quot;A&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot;</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; [39] &quot;B&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;C&quot; &quot;A&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot;</span></a></code></pre></div>
<p>The arguments of <code>ratio</code> and <code>labels</code> are linked In the example above, treatment “C” was assigned twice as often as “A” or “B”. With the following code, treatment “A” is assigned twice as often as “B” or “C” (2:1:1 ratio).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt;  [1] &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot; &quot;B&quot; &quot;C&quot; &quot;A&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;C&quot; &quot;A&quot;</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; [20] &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot; &quot;C&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;B&quot;</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt; [39] &quot;A&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;A&quot;</span></a></code></pre></div>
<p>As a final example, to randomize 100 individuals to four treatment arms in a 2:2:3:3 ratio:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">four.arms &lt;-<span class="st"> </span><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;D&quot;</span>))</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">four.arms</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt;   [1] &quot;D&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot; &quot;D&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;D&quot; &quot;D&quot; &quot;D&quot; &quot;B&quot; &quot;D&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot;</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="co">#&gt;  [19] &quot;C&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;C&quot; &quot;B&quot; &quot;D&quot; &quot;D&quot; &quot;A&quot; &quot;B&quot; &quot;D&quot; &quot;C&quot; &quot;C&quot; &quot;B&quot; &quot;D&quot; &quot;D&quot; &quot;D&quot;</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt;  [37] &quot;B&quot; &quot;A&quot; &quot;D&quot; &quot;C&quot; &quot;C&quot; &quot;D&quot; &quot;A&quot; &quot;C&quot; &quot;B&quot; &quot;A&quot; &quot;D&quot; &quot;B&quot; &quot;A&quot; &quot;C&quot; &quot;A&quot; &quot;A&quot; &quot;C&quot; &quot;D&quot;</span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt;  [55] &quot;B&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;D&quot; &quot;C&quot; &quot;D&quot; &quot;A&quot; &quot;A&quot; &quot;D&quot; &quot;C&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;A&quot; &quot;C&quot; &quot;C&quot; &quot;C&quot;</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt;  [73] &quot;B&quot; &quot;B&quot; &quot;D&quot; &quot;D&quot; &quot;D&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;C&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;C&quot; &quot;D&quot; &quot;D&quot; &quot;C&quot; &quot;D&quot; &quot;D&quot;</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt;  [91] &quot;A&quot; &quot;C&quot; &quot;B&quot; &quot;D&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;C&quot; &quot;A&quot;</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"></a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="kw">table</span>(four.arms)</a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="co">#&gt; four.arms</span></a>
<a class="sourceLine" id="cb11-13" data-line-number="13"><span class="co">#&gt;  A  B  C  D </span></a>
<a class="sourceLine" id="cb11-14" data-line-number="14"><span class="co">#&gt; 21 20 30 29</span></a></code></pre></div>
</div>
<div id="saving-the-randomization-lists" class="section level3">
<h3>1.4 Saving the randomization lists</h3>
<p>The randomization lists can be saved using e.g. <code>write.table()</code> or <code>write.csv()</code>. For example:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">example.list &lt;-<span class="st"> </span><span class="kw">mergedblocks</span>(<span class="dt">n =</span> <span class="dv">50</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="kw">write.csv2</span>(example.list, <span class="dt">file =</span> <span class="st">&quot;./YourFilePath/ExampleList.csv&quot;</span>)</a></code></pre></div>
<p>This particular example will yield a CSV file with two columns. The first column contains the numbers 1-50, the second column contains the allocations.</p>
</div>
</div>
<div id="merged-block-randomization-for-multiple-strata-mergedblocksmulti" class="section level2">
<h2>2. Merged block randomization for multiple strata: <code>mergedblocksmulti()</code></h2>
<p>The function <code>mergedblocksmulti()</code> can be used to create randomization lists for multiple strata, as in a multicentre trial. The function allows for different sample sizes per stratum, and for unequal randomization ratios.</p>
<p>The function <code>mergedblocksmulti()</code> has four arguments. The arguments <code>ratio</code> and <code>labels</code> work the same as for the single stratum function <code>mergedblocks()</code>. The focus of this part of the vignette will be on <code>K</code> and <code>n</code>, the two arguments that work differently compared to the arguments of <code>mergedblocks()</code>.</p>
<div id="multiple-strata-same-sample-size-per-stratum" class="section level3">
<h3>2.1 Multiple strata, same sample size per stratum</h3>
<p>The argument <code>K</code> is set to the number of strata. If the number of individuals per stratum is the same for each stratum, the argument <code>n</code> can be set to this number.</p>
<p>For example, to create randomization lists for three strata with 25 individuals per stratum:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">mergedblocksmulti</span>(<span class="dt">K =</span> <span class="dv">3</span>, <span class="dt">n =</span> <span class="dv">25</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="co">#&gt;    V1 V2 V3</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="co">#&gt; 1   2  1  2</span></a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; 2   1  1  1</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; 3   1  2  1</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; 4   2  2  1</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt; 5   1  1  2</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt; 6   2  1  2</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt; 7   2  2  2</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt; 8   1  2  1</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt; 9   2  2  1</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt; 10  1  1  2</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt; 11  1  2  1</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt; 12  2  1  2</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt; 13  1  1  1</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt; 14  2  1  1</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt; 15  2  2  2</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co">#&gt; 16  2  2  1</span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co">#&gt; 17  1  1  2</span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="co">#&gt; 18  1  2  2</span></a>
<a class="sourceLine" id="cb13-21" data-line-number="21"><span class="co">#&gt; 19  2  2  1</span></a>
<a class="sourceLine" id="cb13-22" data-line-number="22"><span class="co">#&gt; 20  2  1  2</span></a>
<a class="sourceLine" id="cb13-23" data-line-number="23"><span class="co">#&gt; 21  1  2  2</span></a>
<a class="sourceLine" id="cb13-24" data-line-number="24"><span class="co">#&gt; 22  1  1  2</span></a>
<a class="sourceLine" id="cb13-25" data-line-number="25"><span class="co">#&gt; 23  1  2  1</span></a>
<a class="sourceLine" id="cb13-26" data-line-number="26"><span class="co">#&gt; 24  1  1  1</span></a>
<a class="sourceLine" id="cb13-27" data-line-number="27"><span class="co">#&gt; 25  2  2  2</span></a></code></pre></div>
<p>In the code above, default 1:1 allocation was used, with default numeric treatment labels. The output is a dataframe with one column for each stratum. As for <code>mergedblocks()</code>, the allocation ratio can be changed to e.g. 1:2 allocation, and custom labels can be used, e.g. “treatment” and “placebo”:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">mergedblocksmulti</span>(<span class="dt">K =</span> <span class="dv">3</span>, <span class="dt">n =</span> <span class="dv">25</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;treatment&quot;</span>, <span class="st">&quot;placebo&quot;</span>))</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="co">#&gt;           V1        V2        V3</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; 1    placebo treatment   placebo</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; 2    placebo   placebo treatment</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="co">#&gt; 3  treatment treatment   placebo</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; 4    placebo   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; 5    placebo   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt; 6  treatment   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt; 7  treatment treatment   placebo</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt; 8    placebo   placebo treatment</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt; 9    placebo treatment treatment</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt; 10 treatment   placebo treatment</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt; 11   placebo   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt; 12   placebo   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt; 13   placebo   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt; 14 treatment treatment   placebo</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt; 15   placebo treatment   placebo</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt; 16 treatment   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt; 17   placebo   placebo treatment</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">#&gt; 18 treatment   placebo treatment</span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">#&gt; 19   placebo   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"><span class="co">#&gt; 20   placebo treatment treatment</span></a>
<a class="sourceLine" id="cb14-23" data-line-number="23"><span class="co">#&gt; 21   placebo treatment   placebo</span></a>
<a class="sourceLine" id="cb14-24" data-line-number="24"><span class="co">#&gt; 22   placebo   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-25" data-line-number="25"><span class="co">#&gt; 23 treatment   placebo treatment</span></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co">#&gt; 24 treatment   placebo   placebo</span></a>
<a class="sourceLine" id="cb14-27" data-line-number="27"><span class="co">#&gt; 25   placebo treatment   placebo</span></a></code></pre></div>
<p>As a further example, the following code yields randomization lists for four strata, 30 individuals per stratum, with 1:1:1 allocation of three treatments labelled “A”, “B” and “C”.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw">mergedblocksmulti</span>(<span class="dt">K =</span> <span class="dv">4</span>, <span class="dt">n =</span> <span class="dv">30</span>, <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt;    V1 V2 V3 V4</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; 1   A  A  B  C</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; 2   B  C  C  A</span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; 3   A  B  A  B</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; 4   C  A  C  B</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; 5   A  B  B  A</span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; 6   B  C  A  C</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt; 7   C  B  C  A</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"><span class="co">#&gt; 8   C  B  B  B</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="co">#&gt; 9   C  A  A  B</span></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">#&gt; 10  B  C  B  C</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">#&gt; 11  B  A  C  C</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt; 12  A  B  C  A</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt; 13  B  C  A  A</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt; 14  C  C  A  B</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt; 15  C  C  A  C</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">#&gt; 16  B  B  B  B</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">#&gt; 17  A  A  B  C</span></a>
<a class="sourceLine" id="cb15-20" data-line-number="20"><span class="co">#&gt; 18  A  A  C  B</span></a>
<a class="sourceLine" id="cb15-21" data-line-number="21"><span class="co">#&gt; 19  A  C  A  C</span></a>
<a class="sourceLine" id="cb15-22" data-line-number="22"><span class="co">#&gt; 20  B  B  C  A</span></a>
<a class="sourceLine" id="cb15-23" data-line-number="23"><span class="co">#&gt; 21  C  B  B  A</span></a>
<a class="sourceLine" id="cb15-24" data-line-number="24"><span class="co">#&gt; 22  A  A  C  C</span></a>
<a class="sourceLine" id="cb15-25" data-line-number="25"><span class="co">#&gt; 23  C  B  A  A</span></a>
<a class="sourceLine" id="cb15-26" data-line-number="26"><span class="co">#&gt; 24  B  C  C  B</span></a>
<a class="sourceLine" id="cb15-27" data-line-number="27"><span class="co">#&gt; 25  A  A  A  A</span></a>
<a class="sourceLine" id="cb15-28" data-line-number="28"><span class="co">#&gt; 26  C  C  B  C</span></a>
<a class="sourceLine" id="cb15-29" data-line-number="29"><span class="co">#&gt; 27  B  A  A  B</span></a>
<a class="sourceLine" id="cb15-30" data-line-number="30"><span class="co">#&gt; 28  B  A  B  B</span></a>
<a class="sourceLine" id="cb15-31" data-line-number="31"><span class="co">#&gt; 29  A  A  B  A</span></a>
<a class="sourceLine" id="cb15-32" data-line-number="32"><span class="co">#&gt; 30  B  C  C  C</span></a></code></pre></div>
</div>
<div id="multiple-strata-sample-sizes-vary-per-stratum" class="section level3">
<h3>2.2 Multiple strata, sample sizes vary per stratum</h3>
<p>The argument <code>n</code> can be used to incorporate varying sample sizes. For example, suppose we have three strata, with sample sizes 20, 30 and 25 In each stratum, 1:1 allocation to treatments “A” and “B” is desired. We could use the following code:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">mergedblocksmulti</span>(<span class="dt">K =</span> <span class="dv">3</span>, <span class="dt">n =</span> <span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">25</span>), <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="co">#&gt;      V1 V2   V3</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt; 1     A  A    A</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co">#&gt; 2     B  B    B</span></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="co">#&gt; 3     B  B    A</span></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="co">#&gt; 4     A  A    B</span></a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; 5     B  B    A</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt; 6     A  A    B</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt; 7     B  B    B</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt; 8     A  A    B</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt; 9     B  A    A</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt; 10    A  B    A</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">#&gt; 11    B  B    B</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">#&gt; 12    A  A    A</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">#&gt; 13    B  B    B</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="co">#&gt; 14    A  A    A</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">#&gt; 15    A  A    A</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="co">#&gt; 16    A  B    A</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="co">#&gt; 17    B  B    B</span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="co">#&gt; 18    B  A    B</span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21"><span class="co">#&gt; 19    A  A    A</span></a>
<a class="sourceLine" id="cb16-22" data-line-number="22"><span class="co">#&gt; 20    A  B    B</span></a>
<a class="sourceLine" id="cb16-23" data-line-number="23"><span class="co">#&gt; 21 &lt;NA&gt;  A    A</span></a>
<a class="sourceLine" id="cb16-24" data-line-number="24"><span class="co">#&gt; 22 &lt;NA&gt;  B    B</span></a>
<a class="sourceLine" id="cb16-25" data-line-number="25"><span class="co">#&gt; 23 &lt;NA&gt;  B    B</span></a>
<a class="sourceLine" id="cb16-26" data-line-number="26"><span class="co">#&gt; 24 &lt;NA&gt;  A    A</span></a>
<a class="sourceLine" id="cb16-27" data-line-number="27"><span class="co">#&gt; 25 &lt;NA&gt;  A    A</span></a>
<a class="sourceLine" id="cb16-28" data-line-number="28"><span class="co">#&gt; 26 &lt;NA&gt;  B &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb16-29" data-line-number="29"><span class="co">#&gt; 27 &lt;NA&gt;  A &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb16-30" data-line-number="30"><span class="co">#&gt; 28 &lt;NA&gt;  A &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb16-31" data-line-number="31"><span class="co">#&gt; 29 &lt;NA&gt;  B &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb16-32" data-line-number="32"><span class="co">#&gt; 30 &lt;NA&gt;  A &lt;NA&gt;</span></a></code></pre></div>
<p>The argument <code>n</code> is now set to a vector with the desired sample sizes. The output is a dataframe with three columns, one per stratum. The columns with sample sizes 20 and 25 are padded with NAs.</p>
<p>As a further example, with the following code we obtain randomization lists for five strata, sample sizes 35, 30, 40, 20 and 15, for 1:1:1 allocation to treatments “A”, “B” and “C”.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">mergedblocksmulti</span>(<span class="dt">K =</span> <span class="dv">5</span>, <span class="dt">n =</span> <span class="kw">c</span>(<span class="dv">35</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">15</span>), <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="co">#&gt;      V1   V2 V3   V4   V5</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#&gt; 1     A    A  C    A    C</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt; 2     B    B  B    A    A</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt; 3     C    A  A    C    A</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt; 4     C    B  C    B    B</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt; 5     C    C  C    B    C</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"><span class="co">#&gt; 6     B    C  B    C    B</span></a>
<a class="sourceLine" id="cb17-9" data-line-number="9"><span class="co">#&gt; 7     B    A  A    A    A</span></a>
<a class="sourceLine" id="cb17-10" data-line-number="10"><span class="co">#&gt; 8     A    B  A    C    B</span></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="co">#&gt; 9     A    C  B    A    C</span></a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">#&gt; 10    A    A  A    B    C</span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#&gt; 11    B    B  B    C    B</span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="co">#&gt; 12    C    C  C    B    C</span></a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="co">#&gt; 13    C    C  C    A    A</span></a>
<a class="sourceLine" id="cb17-16" data-line-number="16"><span class="co">#&gt; 14    B    A  B    C    B</span></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="co">#&gt; 15    C    A  A    A    C</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="co">#&gt; 16    A    B  A    B &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-19" data-line-number="19"><span class="co">#&gt; 17    A    B  B    B &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-20" data-line-number="20"><span class="co">#&gt; 18    B    C  C    A &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-21" data-line-number="21"><span class="co">#&gt; 19    A    A  B    C &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-22" data-line-number="22"><span class="co">#&gt; 20    B    B  B    B &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-23" data-line-number="23"><span class="co">#&gt; 21    B    C  A &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-24" data-line-number="24"><span class="co">#&gt; 22    C    C  C &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-25" data-line-number="25"><span class="co">#&gt; 23    C    A  C &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-26" data-line-number="26"><span class="co">#&gt; 24    A    B  A &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-27" data-line-number="27"><span class="co">#&gt; 25    A    C  C &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-28" data-line-number="28"><span class="co">#&gt; 26    A    B  A &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-29" data-line-number="29"><span class="co">#&gt; 27    C    A  C &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-30" data-line-number="30"><span class="co">#&gt; 28    B    B  B &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-31" data-line-number="31"><span class="co">#&gt; 29    C    C  A &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-32" data-line-number="32"><span class="co">#&gt; 30    A    A  A &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-33" data-line-number="33"><span class="co">#&gt; 31    B &lt;NA&gt;  B &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-34" data-line-number="34"><span class="co">#&gt; 32    B &lt;NA&gt;  C &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-35" data-line-number="35"><span class="co">#&gt; 33    B &lt;NA&gt;  B &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-36" data-line-number="36"><span class="co">#&gt; 34    C &lt;NA&gt;  B &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-37" data-line-number="37"><span class="co">#&gt; 35    A &lt;NA&gt;  C &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-38" data-line-number="38"><span class="co">#&gt; 36 &lt;NA&gt; &lt;NA&gt;  A &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-39" data-line-number="39"><span class="co">#&gt; 37 &lt;NA&gt; &lt;NA&gt;  C &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-40" data-line-number="40"><span class="co">#&gt; 38 &lt;NA&gt; &lt;NA&gt;  C &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-41" data-line-number="41"><span class="co">#&gt; 39 &lt;NA&gt; &lt;NA&gt;  A &lt;NA&gt; &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb17-42" data-line-number="42"><span class="co">#&gt; 40 &lt;NA&gt; &lt;NA&gt;  A &lt;NA&gt; &lt;NA&gt;</span></a></code></pre></div>
</div>
<div id="saving-the-randomization-lists-1" class="section level3">
<h3>2.3 Saving the randomization lists</h3>
<p>The randomization lists can be saved using e.g. <code>write.table()</code> or <code>write.csv()</code>. For example:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">example.list &lt;-<span class="st"> </span><span class="kw">mergedblocksmulti</span>(<span class="dt">K =</span> <span class="dv">5</span>, <span class="dt">n =</span> <span class="kw">c</span>(<span class="dv">35</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">20</span>, <span class="dv">15</span>), <span class="dt">ratio =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>))</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw">write.csv2</span>(example.list, <span class="dt">file =</span> <span class="st">&quot;./YourFilePath/ExampleList.csv&quot;</span>)</a></code></pre></div>
<p>This particular example will yield a CSV file with six columns. The first column contains the numbers 1-40, the remaining five columns contain the allocations per stratum (one column per stratum).</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
